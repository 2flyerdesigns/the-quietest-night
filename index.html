<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Quietest Night Before Christmas</title>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Kalam:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(135deg, #000000 0%, #0a1a5c 50%, #000000 100%);
            color: #2d2424;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="10" cy="10" r="1" fill="white" opacity="0.7"/><circle cx="40" cy="30" r="1" fill="white" opacity="0.7"/><circle cx="70" cy="20" r="1" fill="white" opacity="0.7"/><circle cx="90" cy="60" r="1" fill="white" opacity="0.7"/><circle cx="30" cy="80" r="1" fill="white" opacity="0.7"/><circle cx="60" cy="90" r="1" fill="white" opacity="0.7"/></svg>');
            z-index: -1;
            animation: twinkle 3s infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }
        .book-container {
            width: 95%;
            max-width: 1200px;
            background: #fff9f0;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            margin-bottom: 30px;
            border: 15px solid #8b0000;
        }
        .book-title {
            text-align: center;
            padding: 25px;
            background: linear-gradient(to right, #8b0000, #b22222, #8b0000);
            color: #ffeb3b;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 2.8rem;
            text-shadow: 3px 3px 0px #2d2424;
            margin-bottom: 0;
            letter-spacing: 2px;
            border-bottom: 5px dashed #ffd700;
        }
        .book-content {
            padding: 20px;
            min-height: 70vh;
        }
        .page {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            min-height: 60vh;
            gap: 20px;
            position: relative;
        }
        .page-odd .page-image {
            order: 1;
        }
        .page-odd .page-text-container {
            order: 2;
        }
        .page-even .page-image {
            order: 2;
        }
        .page-even .page-text-container {
            order: 1;
        }
        .page-image {
            width: 50%;
            height: 60vh;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);
            border: 5px solid #8b0000;
            background: white;
        }
        .page-text-container {
            width: 50%;
            padding: 30px;
            background: rgba(255, 253, 248, 0.95);
            border-radius: 15px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid #2e7d32;
            height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            background-image: url('https://lh3.googleusercontent.com/d/1rPhQrnrqOvo4n_QFfcA7cat72YKp4xxO');
            background-size: cover;
            background-blend-mode: multiply;
            background-color: rgba(255, 253, 248, 0.95);
        }
        .page-text-container::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ffd700, #ffeb3b, #ffd700);
            border-radius: 20px;
            z-index: -1;
            opacity: 0.3;
        }
        .page-text {
            font-family: 'Kalam', cursive;
            font-size: 1.4rem;
            line-height: 1.7;
            text-align: left;
            color: #2d2424;
            max-height: 45vh;
            overflow-y: auto;
            padding-right: 10px;
            padding: 15px;
            border-radius: 8px;
        }
        .page-text::-webkit-scrollbar {
            width: 8px;
        }
        .page-text::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .page-text::-webkit-scrollbar-thumb {
            background: #8b0000;
            border-radius: 10px;
        }
        .page-number {
            text-align: center;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.5rem;
            color: #8b0000;
            margin-top: 15px;
            font-weight: bold;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 0 20px 20px;
        }
        button {
            background: linear-gradient(to bottom, #8b0000, #b22222);
            color: #ffeb3b;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to bottom, #b22222, #8b0000);
        }
        button:disabled {
            background: #cccccc;
            color: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            border: 2px solid #999;
        }
        .download-btn {
            background: linear-gradient(to right, #2e7d32, #4caf50);
            margin-top: 10px;
            padding: 12px 25px;
            font-size: 1.4rem;
            color: white;
        }
        .audio-btn {
            background: linear-gradient(to right, #0d47a1, #1976d2);
            margin-top: 10px;
            padding: 12px 25px;
            font-size: 1.4rem;
            color: white;
        }
        .page-indicator {
            text-align: center;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.6rem;
            color: #ffeb3b;
            margin-top: 10px;
            text-shadow: 2px 2px 0px #8b0000;
        }
        .hidden {
            display: none !important;
        }
        .audio-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        .snowflake {
            position: fixed;
            color: white;
            font-size: 1.5rem;
            user-select: none;
            z-index: -1;
            animation: fall linear infinite;
            pointer-events: none;
        }
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        .audio-status {
            text-align: center;
            color: #ffeb3b;
            margin-top: 10px;
            font-family: 'Kalam', cursive;
            font-size: 1.2rem;
            text-shadow: 1px 1px 0px #8b0000;
        }
        .page-image.error {
            background: linear-gradient(45deg, #8b0000, #b22222);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Kalam', cursive;
            font-size: 1.2rem;
            text-align: center;
            padding: 20px;
        }
        .image-loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .copyright {
            text-align: center;
            font-family: 'Kalam', cursive;
            color: #ffeb3b;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1rem;
            text-shadow: 1px 1px 0px #8b0000;
            padding: 10px;
            width: 100%;
        }
        @media (max-width: 768px) {
            .book-title { font-size: 2.2rem; }
            .page-text { font-size: 1.2rem; }
            .page { flex-direction: column; min-height: auto; gap: 15px; }
            .page-image, .page-text-container { width: 100%; height: auto; }
            .page-image { height: 40vh; min-height: 300px; object-fit: cover; }
            .page-text-container { min-height: 40vh; padding: 20px; }
            .copyright { font-size: 1rem; margin-top: 15px; }
        }
        @media (max-width: 480px) {
            .book-title { font-size: 1.8rem; padding: 15px; }
            .page-text { font-size: 1rem; }
            button { padding: 10px 20px; font-size: 1.2rem; }
            .book-container { border-width: 10px; }
            .page-image { height: 35vh; min-height: 250px; }
            .copyright { font-size: 0.9rem; padding: 8px; }
        }
    </style>
</head>
<body>
    <h1 class="book-title">The Quietest Night Before Christmas</h1>
    <div class="book-container">
        <div class="book-content">
            <div id="page-0" class="page page-odd">
                <img src="https://lh3.googleusercontent.com/d/1XGw2M1HPQIOOKtUWaidraEiVQ1TE9SWJ" alt="Book Cover" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        <h2 style="text-align: center; color: #8b0000; font-family: 'Mountains of Christmas', cursive; margin-bottom: 20px; font-size: 2.5rem;">The Quietest Night Before Christmas</h2>
                        <p style="text-align: center; margin-top: 15px; font-size: 1.8rem;">A magical Christmas story for children</p>
                    </div>
                    <div class="page-number">Cover</div>
                </div>
            </div>
            <div id="page-1" class="page page-odd hidden">
                <img src="https://lh3.googleusercontent.com/d/1CYwTOyIcj_JVwm1hugccUhIEskLrtOio" alt="Page 1" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        The night before Christmas is the quietest night of the whole year.
                        High up north, a flurry of snowflakes danced around a very
                        special workshop. Santa Claus adjusted his big belt and yawned a tiny, happy yawn.
                    </div>
                    <div class="page-number">Page 1</div>
                </div>
            </div>
            <div id="page-2" class="page page-even hidden">
                <img src="https://lh3.googleusercontent.com/d/1Q-v0xtTkOpEorsV1xl4bV2BnuF5zGOKS" alt="Page 2" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        It was time for the biggest journey of all. Santa took one last look at his list,
                        which was miles and miles long, written on paper as soft as velvet. He
                        whispered, "Let's see... Elara is fast asleep. Good."
                    </div>
                    <div class="page-number">Page 2</div>
                </div>
            </div>
            <div id="page-3" class="page page-odd hidden">
                <img src="https://lh3.googleusercontent.com/d/1T6pHV0oTZxsg_l_VouZVpDLHD6EKkUxb" alt="Page 3" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Outside, the stars were sparkling like spilled sugar. Santa headed to the stable
                        where his team waited, especially gentle Lumi, who had the softest nose of all
                        the reindeer. "Ready for our big flight, my dear?" Santa murmured.
                    </div>
                    <div class="page-number">Page 3</div>
                </div>
            </div>
            <div id="page-4" class="page page-even hidden">
                <img src="https://lh3.googleusercontent.com/d/1Op7GzlIna83s5NLqCgyH41xO84tVz5Gc" alt="Page 4" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        The sleigh was packed perfectly, wrapped up tight with ribbons of
                        moonlight. Santa climbed into the driver's seat, pulling the enormous,
                        fuzzy reins. "Up and away, Lumi! Quiet as a shadow, quick as a wish!"
                    </div>
                    <div class="page-number">Page 4</div>
                </div>
            </div>
            <div id="page-5" class="page page-odd hidden">
                <img src="https://lh3.googleusercontent.com/d/1hZDGts0OQksBH4Vav9T3_WdZ7nXCePy9" alt="Page 5" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Down below, the world was curled up tight under a blanket of white. Santa
                        guided the sleigh carefully over silent, sleeping towns and twinkling city
                        lights, ensuring not a single chime of a bell could wake a soul.
                    </div>
                    <div class="page-number">Page 5</div>
                </div>
            </div>
            <div id="page-6" class="page page-even hidden">
                <img src="https://lh3.googleusercontent.com/d/1W0b-N4Sp6_64s6Va4u35go6LN9D1HalX" alt="Page 6" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Soon, they arrived at a cozy little house. Santa tiptoed inside, his boots making
                        no noise at all, and placed a very special, brightly colored box right beneath the
                        tree for Elara.
                    </div>
                    <div class="page-number">Page 6</div>
                </div>
            </div>
            <div id="page-7" class="page page-odd hidden">
                <img src="https://lh3.googleusercontent.com/d/1GKmfaiGqVU8yWpaMKjJdA62UBzz9_mZe" alt="Page 7" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Back in the starry night, Santa stretched his arms and sighed happily. The sleigh
                        felt much lighter now! He looked down at the peaceful world and smiled.
                        Delivering joy felt wonderful, but he was starting to get sleepy too.
                    </div>
                    <div class="page-number">Page 7</div>
                </div>
            </div>
            <div id="page-8" class="page page-even hidden">
                <img src="https://lh3.googleusercontent.com/d/1WOWxI5Pb8ncFqmlmBqtMIMt3jLYsBsu3" alt="Page 8" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        "Just a little further, Lumi," Santa whispered to his loyal lead reindeer.
                        Lumi flicked her soft ears and kept pulling steadily. The moon shone on
                        her antlers, lighting the way home across the quiet, deep blue sky.
                    </div>
                    <div class="page-number">Page 8</div>
                </div>
            </div>
            <div id="page-9" class="page page-odd hidden">
                <img src="https://lh3.googleusercontent.com/d/1GIikja9EmyueaCTDCiZrMmno2an_qLkG" alt="Page 9" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Finally, the familiar lights of the North Pole shone ahead! They landed softly,
                        like a feather drifting onto the snow. Santa led Lumi back into the warm
                        stable, gave her a big hug, and tucked her in with a blanket of hay.
                    </div>
                    <div class="page-number">Page 9</div>
                </div>
            </div>
            <div id="page-10" class="page page-even hidden">
                <img src="https://lh3.googleusercontent.com/d/1Sw_vby-RIpWwn4DZ6SXJiJiymG3LWYii" alt="Page 10" class="page-image image-loading" onload="this.classList.remove('image-loading')" onerror="this.className='page-image error'">
                <div class="page-text-container">
                    <div class="page-text">
                        Santa Claus yawned a great big, rumble-in-the-tummy yawn. The lists
                        were checked, the gifts were delivered, and the magic was done. He snuggled
                        into his own bed, whispering, "Merry Christmas to all, and to all a good
                        night's sleep!"
                    </div>
                    <div class="page-number">Page 10</div>
                </div>
            </div>
            <div id="page-11" class="page page-end hidden">
                <div class="page-text-container" style="width: 100%; text-align: center; justify-content: center;">
                    <div class="page-text" style="font-size: 3rem; color: #8b0000; font-family: 'Mountains of Christmas', cursive; margin-bottom: 30px;">
                        The End
                    </div>
                    <div class="page-text" style="font-size: 2rem; color: #2d2424; font-family: 'Kalam', cursive; line-height: 1.4; margin-bottom: 20px;">
                        And the magic continues with you...
                    </div>
                    <div class="page-text" style="font-size: 2.2rem; color: #8b0000; font-family: 'Mountains of Christmas', cursive; margin-top: 20px;">
                        Merry Christmas!
                    </div>
                </div>
            </div>
        </div>
        <div class="navigation">
            <button id="prev-btn" disabled>Previous</button>
            <button id="next-btn">Next</button>
        </div>
    </div>
    <div class="audio-controls">
        <button class="audio-btn" id="play-btn">Play Story</button>
        <button class="audio-btn" id="pause-btn">Pause</button>
        <button class="download-btn" id="download-btn">View Printable Version</button>
    </div>
    <div class="audio-status" id="audio-status">Audio: Loading...</div>
    <div class="page-indicator" id="page-indicator">Page 1 of 12</div>
    <div class="copyright">
        Copyright © 2025 2flyerdesigns<br>All rights reserved.
    </div>

    <script>
        let currentPage = 0;
        const totalPages = 12;
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const pageIndicator = document.getElementById('page-indicator');
        const downloadBtn = document.getElementById('download-btn');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const audioStatus = document.getElementById('audio-status');

        let isPlaying = false;
        let autoContinue = false;

        const pageKeys = ['cover', 'page-1', 'page-2', 'page-3', 'page-4', 'page-5', 'page-6', 'page-7', 'page-8', 'page-9', 'page-10', 'end'];
        const narratorAudio = {};
        pageKeys.forEach(key => {
            narratorAudio[key] = new Audio(`narrator/${key}.mp3`);
        });

        const santaAudio = {
            'page-2': new Audio('santa/page-2-quote.mp3'),
            'page-3': new Audio('santa/page-3-quote.mp3'),
            'page-4': new Audio('santa/page-4-quote.mp3'),
            'page-8': new Audio('santa/page-8-quote.mp3')
        };

        const bgMusic = new Audio('background-music.mp3');
        bgMusic.loop = true;
        bgMusic.volume = 0.2;

        document.body.addEventListener('click', function initAudio() {
            bgMusic.play().catch(e => console.log("Background music loaded on user gesture"));
            document.body.removeEventListener('click', initAudio);
        }, { once: true });

        function playPageAudio(pageNum) {
            if (pageNum < 0 || pageNum >= totalPages) return;

            Object.values(narratorAudio).forEach(a => a.pause());
            Object.values(santaAudio).forEach(a => a.pause());

            const key = pageKeys[pageNum];
            const narrator = narratorAudio[key];
            narrator.currentTime = 0;
            isPlaying = true;
            playBtn.textContent = "Playing...";
            audioStatus.textContent = `Playing page ${pageNum + 1}`;

            narrator.play().catch(e => {
                audioStatus.textContent = "Narrator audio failed to load";
                isPlaying = false;
                playBtn.textContent = "Play Story";
            });

            if (santaAudio[key]) {
                setTimeout(() => {
                    santaAudio[key].currentTime = 0;
                    santaAudio[key].play().catch(console.log);
                }, 1500);
            }

            narrator.onended = () => {
                isPlaying = false;
                playBtn.textContent = "Play Story";
                audioStatus.textContent = "Audio finished";
                if (autoContinue && pageNum < totalPages - 1) {
                    setTimeout(() => {
                        currentPage++;
                        showPage(currentPage);
                        playPageAudio(currentPage);
                    }, 500);
                }
            };
        }

        playBtn.addEventListener('click', () => {
            if (!isPlaying) {
                autoContinue = true;
                playPageAudio(currentPage);
            }
        });

        pauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                const key = pageKeys[currentPage];
                narratorAudio[key].pause();
                if (santaAudio[key]) santaAudio[key].pause();
                isPlaying = false;
                autoContinue = false;
                playBtn.textContent = "Play Story";
                audioStatus.textContent = "Audio: Paused";
            }
        });

        function resetAudio() {
            autoContinue = false;
            if (isPlaying) {
                Object.values(narratorAudio).forEach(a => a.pause());
                Object.values(santaAudio).forEach(a => a.pause());
                isPlaying = false;
                playBtn.textContent = "Play Story";
            }
        }

        function showPage(pageNumber) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(`page-${pageNumber}`).classList.remove('hidden');
            prevBtn.disabled = pageNumber === 0;
            nextBtn.disabled = pageNumber === totalPages - 1;
            pageIndicator.textContent = `Page ${pageNumber + 1} of ${totalPages}`;
        }

        prevBtn.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                showPage(currentPage);
                resetAudio();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages - 1) {
                currentPage++;
                showPage(currentPage);
                resetAudio();
            }
        });

        // Keep your existing PDF function here (from Pasted_Text_1764708500222.txt)
        function generatePDF() {
            const printContent = `<!DOCTYPE html>...`; // <<< PASTE FULL PDF HTML STRING HERE
            const printWindow = window.open('', '_blank', 'width=1000,height=800,scrollbars=yes,resizable=yes');
            printWindow.document.write(printContent);
            printWindow.document.close();
        }
        downloadBtn.addEventListener('click', generatePDF);

        function createSnowflakes() {
            for (let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.innerHTML = '❄';
                snowflake.style.left = `${Math.random() * 100}%`;
                snowflake.style.fontSize = `${Math.random() * 20 + 10}px`;
                snowflake.style.animationDuration = `${Math.random() * 10 + 5}s`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                document.body.appendChild(snowflake);
            }
        }
        createSnowflakes();

        showPage(0);
        audioStatus.textContent = "Audio: Ready to play";
    </script>
</body>
</html>